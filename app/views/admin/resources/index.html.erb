<% content_for :navbar do %>
  <li><%= link_to "Home", admin_path%></li>
  <li><%= link_to ResourceName.pluralize, admin_resources_path %></li>
  <li><%= link_to "Fields", admin_fields_path %></li>
<% end %>

<div class="page-header">
  <h1>Listing <%= ResourceName.pluralize %></h1>
</div>

<% if @resources.blank? %>
  <% flash[:notice] = "No #{ ResourceName } created. Click on 'Add new #{ ResourceName }'" %>
<% else %>
  <table class="table table-hover">
    <thead>
      <tr>
        <% attributes = Resource.column_names - ['id', 'created_at', 'updated_at'] %>
        <% attributes.each do |attr| %>
          <th><%= attr.humanize %></th>
        <% end %>
        <% @fields.each do |field| %>
          <th><%= field.name %></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
      <% @resources.each do |resource| %>
        <tr>
          <% attributes = Resource.column_names - ['id', 'created_at', 'updated_at'] %>
          <% attributes.each do |attr| %>
            <td><%= resource.try attr.to_sym %></td>
          <% end %>
          <% @fields.each do |field| %>
            <td><%= get_field_value(resource, field) %></td>
          <% end %>
          <td>
            <%= link_to 'Show', admin_resource_path(resource), :class => 'btn btn-mini' %>
            <%= link_to 'Edit', edit_admin_resource_path(resource), :class => 'btn btn-mini btn-info' %>
            <%= link_to 'Destroy', admin_resource_path(resource), method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-mini btn-danger' %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% end %>

<div>
  <%= link_to "Add new #{ ResourceName }", new_admin_resource_path, :class => 'btn btn-success' %>
</div>